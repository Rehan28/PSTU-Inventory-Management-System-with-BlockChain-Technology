(()=>{var e={};e.id=1428,e.ids=[1428],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8218:(e,s,t)=>{Promise.resolve().then(t.bind(t,36123))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22496:(e,s,t)=>{"use strict";function a(){return null}t.r(s),t.d(s,{default:()=>a})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36123:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\pstu_inventory_management\\\\frontend\\\\app\\\\admin\\\\users\\\\staff\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\pstu_inventory_management\\frontend\\app\\admin\\users\\staff\\page.tsx","default")},48386:(e,s,t)=>{Promise.resolve().then(t.bind(t,77393))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77393:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(28625),r=t(64996),l=t(55136),n=t(55918),i=t(1332),o=t(77374),d=t(70136),c=t(61242),m=t(51936),f=t(33272),x=t(29234),h=t(94922),u=t(58400),p=t(11332),j=t(83029),g=t(51275),b=t(93948),v=t.n(b);function y(){let[e,s]=(0,r.useState)([]),[t,b]=(0,r.useState)(!0),[y,N]=(0,r.useState)(""),[w,C]=(0,r.useState)("All Offices"),[_,A]=(0,r.useState)([]),[S,k]=(0,r.useState)(["All Offices"]),[E,P]=(0,r.useState)(""),[q,L]=(0,r.useState)(!1),[M,$]=(0,r.useState)(null),[D,O]=(0,r.useState)({name:"",email:"",phone:"",designation:"",qualification:""}),[G,F]=(0,r.useState)(!1),[T,W]=(0,r.useState)(null),Z=e=>{N(e),z(e,w)},z=(s,t)=>{let a=e;s&&(a=a.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())||e.officeName.toLowerCase().includes(s.toLowerCase())||e.officeSection.toLowerCase().includes(s.toLowerCase()))),"All Offices"!==t&&(a=a.filter(e=>e.officeName===t)),A(a)},R=e=>{$(e),O({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",qualification:e.qualification||""}),L(!0)},B=async()=>{if(M)try{F(!0);let e=await fetch(`http://localhost:5000/api/users/update/${M._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!e.ok)throw Error("Failed to update staff member");let t=await e.json();s(e=>e.map(e=>e._id===M._id?{...e,...t}:e)),A(e=>e.map(e=>e._id===M._id?{...e,...t}:e)),L(!1),$(null),alert("Staff member updated successfully!")}catch(e){console.error("Error updating staff member:",e),alert(e instanceof Error?e.message:"Failed to update staff member")}finally{F(!1)}},H=async e=>{if(confirm("Are you sure you want to delete this staff member?"))try{if(W(e),(await fetch(`http://localhost:5000/api/users/delete/${e}`,{method:"DELETE"})).ok)s(s=>s.filter(s=>s._id!==e)),A(s=>s.filter(s=>s._id!==e)),alert("Staff member deleted successfully!");else throw Error("Failed to delete staff member")}catch(e){console.error("Error deleting staff member:",e),alert(e instanceof Error?e.message:"Failed to delete staff member")}finally{W(null)}};return t?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Staff Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and view all staff members"})]}),(0,a.jsx)(v(),{href:"/admin/staff/create",children:(0,a.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Staff"]})})]}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(f.A,{className:"w-8 h-8 animate-spin mx-auto mb-4",style:{color:"#51247a"}}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading staff..."})]})})]}):E?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Staff Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and view all staff members"})]}),(0,a.jsx)(v(),{href:"/admin/staff/create",children:(0,a.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Staff"]})})]}),(0,a.jsx)(l.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,a.jsx)(l.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"text-center text-red-600",children:[(0,a.jsx)("p",{className:"font-medium",children:"Error loading data"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:E}),(0,a.jsx)(n.$,{onClick:()=>window.location.reload(),className:"mt-4",variant:"outline",children:"Retry"})]})})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Staff Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage and view all staff members"})]}),(0,a.jsx)(v(),{href:"/admin/staff/create",children:(0,a.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Staff"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(l.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Staff"}),(0,a.jsx)("p",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.length})]}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"#f3e8ff"},children:(0,a.jsx)(x.A,{className:"w-4 h-4 text-purple-600"})})]})})}),(0,a.jsx)(l.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"With Phone Numbers"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.phone&&""!==e.phone.trim()).length})]}),(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-4 h-4 text-green-600"})})]})})}),(0,a.jsx)(l.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,a.jsx)(l.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Offices"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:new Set(e.map(e=>e.officeName).filter(e=>"N/A"!==e)).size})]}),(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(u.A,{className:"w-4 h-4 text-blue-600"})})]})})})]}),(0,a.jsxs)(l.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,a.jsxs)(l.aR,{children:[(0,a.jsx)(l.ZB,{style:{color:"#51247a"},children:"All Staff"}),(0,a.jsx)(l.BT,{children:"View and manage all staff members"})]}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4 mb-6",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)(i.p,{placeholder:"Search by name, email, or office...",value:y,onChange:e=>Z(e.target.value),className:"pl-10 focus:border-purple-500",style:{borderColor:"#e7e7e7"}})]}),(0,a.jsxs)(o.l6,{value:w,onValueChange:e=>{C(e),z(y,e)},children:[(0,a.jsx)(o.bq,{className:"w-48 focus:border-purple-500",style:{borderColor:"#e7e7e7"},children:(0,a.jsx)(o.yv,{})}),(0,a.jsx)(o.gC,{children:S.map(e=>(0,a.jsx)(o.eb,{value:e,children:e},e))})]})]}),(0,a.jsx)("div",{className:"rounded-md border",style:{borderColor:"#e7e7e7"},children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{style:{backgroundColor:"#f8fafc"},children:[(0,a.jsx)(d.nd,{style:{color:"#51247a"},children:"No"}),(0,a.jsx)(d.nd,{style:{color:"#51247a"},children:"Staff Member"}),(0,a.jsx)(d.nd,{style:{color:"#51247a"},children:"Office"}),(0,a.jsx)(d.nd,{style:{color:"#51247a"},children:"Phone Number"}),(0,a.jsx)(d.nd,{style:{color:"#51247a"},children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:_.map((e,s)=>(0,a.jsxs)(d.Hj,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d.nA,{children:(0,a.jsx)("span",{className:"font-medium text-gray-900",children:s+1})}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.officeName}),"N/A"!==e.officeSection&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Section: ",e.officeSection]})]})}),(0,a.jsx)(d.nA,{children:(0,a.jsx)("div",{children:e.phone&&""!==e.phone.trim()?(0,a.jsxs)("p",{className:"text-sm text-gray-900 flex items-center",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 mr-1"}),e.phone]}):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"N/A"})})}),(0,a.jsx)(d.nA,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.$,{size:"sm",variant:"outline",className:"border-blue-200 text-blue-600 hover:bg-blue-50 bg-transparent",onClick:()=>R(e),children:(0,a.jsx)(j.A,{className:"w-3 h-3"})}),(0,a.jsx)(n.$,{size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 bg-transparent",onClick:()=>H(e._id),disabled:T===e._id,children:T===e._id?(0,a.jsx)(f.A,{className:"w-3 h-3 animate-spin"}):(0,a.jsx)(g.A,{className:"w-3 h-3"})})]})})]},e._id))})]})}),0===_.length&&!t&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No staff members found matching your search criteria."})})]})]}),(0,a.jsx)(c.lG,{open:q,onOpenChange:L,children:(0,a.jsxs)(c.Cf,{className:"max-w-md",children:[(0,a.jsxs)(c.c7,{children:[(0,a.jsx)(c.L3,{style:{color:"#51247a"},children:"Edit Staff Member"}),(0,a.jsx)(c.rr,{children:"Update the staff member's information"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)(i.p,{value:D.name,onChange:e=>O({...D,name:e.target.value}),placeholder:"Enter name",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)(i.p,{value:D.email,onChange:e=>O({...D,email:e.target.value}),placeholder:"Enter email",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Phone"}),(0,a.jsx)(i.p,{value:D.phone,onChange:e=>O({...D,phone:e.target.value}),placeholder:"Enter phone number",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Designation"}),(0,a.jsx)(i.p,{value:D.designation,onChange:e=>O({...D,designation:e.target.value}),placeholder:"Enter designation",className:"mt-1"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Qualification"}),(0,a.jsx)(i.p,{value:D.qualification,onChange:e=>O({...D,qualification:e.target.value}),placeholder:"Enter qualification",className:"mt-1"})]})]}),(0,a.jsxs)(c.Es,{children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),(0,a.jsx)(n.$,{style:{backgroundColor:"#51247a"},className:"text-white",onClick:B,disabled:G,children:G?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})})]})}},79551:e=>{"use strict";e.exports=require("url")},85306:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>f,tree:()=>d});var a=t(5853),r=t(60554),l=t(30708),n=t.n(l),i=t(8067),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d={children:["",{children:["admin",{children:["users",{children:["staff",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,36123)),"D:\\pstu_inventory_management\\frontend\\app\\admin\\users\\staff\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,22496)),"D:\\pstu_inventory_management\\frontend\\app\\admin\\users\\staff\\loading.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,87254)),"D:\\pstu_inventory_management\\frontend\\app\\admin\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,31077))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,97898)),"D:\\pstu_inventory_management\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,48358,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,31077))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\pstu_inventory_management\\frontend\\app\\admin\\users\\staff\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/users/staff/page",pathname:"/admin/users/staff",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9683,9139,4405,8949,9143,3203,8443,8632],()=>t(85306));module.exports=a})();