(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5613],{18760:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>b});var l=s(73365),t=s(1521),r=s(86170),n=s(58600),c=s(87812),i=s(10096),d=s(69060),o=s(37896),m=s(23060),h=s(63678);let x=(0,s(87982).A)("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);var u=s(96872),j=s(67228),f=s(16296),p=s(60531),N=s(27521),g=s(59534),y=s.n(g);function b(){let[e,a]=(0,t.useState)([]),[s,g]=(0,t.useState)(!0),[b,v]=(0,t.useState)(""),[w,C]=(0,t.useState)("All Departments"),[A,_]=(0,t.useState)([]),[k,E]=(0,t.useState)(["All Departments"]),[T,S]=(0,t.useState)(""),[L,D]=(0,t.useState)(!1),[F,M]=(0,t.useState)(null),[$,q]=(0,t.useState)({name:"",email:"",phone:"",designation:"",qualification:""}),[P,W]=(0,t.useState)(!1),[Z,z]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{g(!0),S("");let e=await fetch("http://localhost:5000/api/users/get-teachers");if(!e.ok)throw Error("Failed to fetch teachers");let s=await e.json(),l=await fetch("http://localhost:5000/api/departments/get");if(!l.ok)throw Error("Failed to fetch departments");let t=await l.json(),r=new Map(t.map(e=>[e._id,e])),n=s.map(e=>{let a=e.department_id?r.get(e.department_id):null;return{...e,phone_number:e.phone_number||"",departmentName:(null==a?void 0:a.name)||"N/A",facultyName:(null==a?void 0:a.faculty)||"N/A"}}),c=["All Departments",...t.map(e=>e.name)];a(n),_(n),E(c)}catch(e){console.error("Error fetching data:",e),S(e instanceof Error?e.message:"Failed to load data")}finally{g(!1)}})()},[]);let O=e=>{v(e),B(e,w)},B=(a,s)=>{let l=e;a&&(l=l.filter(e=>{var s;return e.name.toLowerCase().includes(a.toLowerCase())||e.email.toLowerCase().includes(a.toLowerCase())||(null===(s=e._id)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase()))||e.departmentName.toLowerCase().includes(a.toLowerCase())})),"All Departments"!==s&&(l=l.filter(e=>e.departmentName===s)),_(l)},I=e=>{M(e),q({name:e.name,email:e.email,phone:e.phone_number||"",designation:e.designation||"",qualification:e.qualification||""}),D(!0)},U=async()=>{if(F)try{W(!0);let e=await fetch("http://localhost:5000/api/users/update/".concat(F._id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!e.ok)throw Error("Failed to update teacher");await e.json(),a(e=>e.map(e=>e._id===F._id?{...e,...$}:e)),_(e=>e.map(e=>e._id===F._id?{...e,...$}:e)),alert("Teacher updated successfully!"),D(!1)}catch(e){console.error("Error updating teacher:",e),alert("Failed to update teacher")}finally{W(!1)}},V=async(e,s)=>{if(window.confirm("Are you sure you want to delete ".concat(s,"?")))try{if(z(e),(await fetch("http://localhost:5000/api/users/delete/".concat(e),{method:"DELETE"})).ok)a(a=>a.filter(a=>a._id!==e)),_(a=>a.filter(a=>a._id!==e)),alert("Teacher deleted successfully!");else throw Error("Failed to delete teacher")}catch(e){console.error("Error deleting teacher:",e),alert("Failed to delete teacher")}finally{z(null)}};return s?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Teachers Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage and view all teaching faculty members"})]}),(0,l.jsx)(y(),{href:"/admin/teachers/create",children:(0,l.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Teacher"]})})]}),(0,l.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)(h.A,{className:"w-8 h-8 animate-spin mx-auto mb-4",style:{color:"#51247a"}}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading teachers..."})]})})]}):T?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Teachers Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage and view all teaching faculty members"})]}),(0,l.jsx)(y(),{href:"/admin/teachers/create",children:(0,l.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Teacher"]})})]}),(0,l.jsx)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,l.jsx)(r.Wu,{className:"p-6",children:(0,l.jsxs)("div",{className:"text-center text-red-600",children:[(0,l.jsx)("p",{className:"font-medium",children:"Error loading data"}),(0,l.jsx)("p",{className:"text-sm mt-1",children:T}),(0,l.jsx)(n.$,{onClick:()=>window.location.reload(),className:"mt-4",variant:"outline",children:"Retry"})]})})})]}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold",style:{color:"#51247a"},children:"Teachers Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage and view all teaching faculty members"})]}),(0,l.jsx)(y(),{href:"/admin/teachers/create",children:(0,l.jsxs)(n.$,{className:"text-white hover:bg-purple-700 flex items-center",style:{backgroundColor:"#51247a"},children:[(0,l.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Add Teacher"]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsx)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,l.jsx)(r.Wu,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Teachers"}),(0,l.jsx)("p",{className:"text-2xl font-bold",style:{color:"#51247a"},children:e.length})]}),(0,l.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{backgroundColor:"#f3e8ff"},children:(0,l.jsx)(x,{className:"w-4 h-4 text-purple-600"})})]})})}),(0,l.jsx)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,l.jsx)(r.Wu,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"With Phone Numbers"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>e.phone_number&&""!==e.phone_number.trim()).length})]}),(0,l.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(u.A,{className:"w-4 h-4 text-green-600"})})]})})}),(0,l.jsx)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:(0,l.jsx)(r.Wu,{className:"p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Departments"}),(0,l.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:new Set(e.map(e=>e.departmentName).filter(e=>"N/A"!==e)).size})]}),(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)(j.A,{className:"w-4 h-4 text-blue-600"})})]})})})]}),(0,l.jsxs)(r.Zp,{style:{borderColor:"#e7e7e7",backgroundColor:"#ffffff"},children:[(0,l.jsxs)(r.aR,{children:[(0,l.jsx)(r.ZB,{style:{color:"#51247a"},children:"All Teachers"}),(0,l.jsx)(r.BT,{children:"View and manage all teaching faculty members"})]}),(0,l.jsxs)(r.Wu,{children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,l.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,l.jsx)(c.p,{placeholder:"Search by name, email, user ID, or department...",value:b,onChange:e=>O(e.target.value),className:"pl-10 focus:border-purple-500",style:{borderColor:"#e7e7e7"}})]}),(0,l.jsxs)(i.l6,{value:w,onValueChange:e=>{C(e),B(b,e)},children:[(0,l.jsx)(i.bq,{className:"w-48 focus:border-purple-500",style:{borderColor:"#e7e7e7"},children:(0,l.jsx)(i.yv,{})}),(0,l.jsx)(i.gC,{children:k.map(e=>(0,l.jsx)(i.eb,{value:e,children:e},e))})]})]}),(0,l.jsx)("div",{className:"rounded-md border",style:{borderColor:"#e7e7e7"},children:(0,l.jsxs)(d.XI,{children:[(0,l.jsx)(d.A0,{children:(0,l.jsxs)(d.Hj,{style:{backgroundColor:"#f8fafc"},children:[(0,l.jsx)(d.nd,{style:{color:"#51247a"},children:"No"}),(0,l.jsx)(d.nd,{style:{color:"#51247a"},children:"Teacher"}),(0,l.jsx)(d.nd,{style:{color:"#51247a"},children:"Department"}),(0,l.jsx)(d.nd,{style:{color:"#51247a"},children:"Phone Number"}),(0,l.jsx)(d.nd,{style:{color:"#51247a"},children:"Actions"})]})}),(0,l.jsx)(d.BF,{children:A.map((e,a)=>(0,l.jsxs)(d.Hj,{className:"hover:bg-gray-50",children:[(0,l.jsx)(d.nA,{children:(0,l.jsx)("span",{className:"font-medium text-gray-900",children:a+1})}),(0,l.jsx)(d.nA,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})}),(0,l.jsx)(d.nA,{children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium text-gray-900",children:e.departmentName}),"N/A"!==e.facultyName&&(0,l.jsxs)("p",{className:"text-sm text-gray-500",children:["Faculty: ",e.facultyName]})]})}),(0,l.jsx)(d.nA,{children:(0,l.jsx)("div",{children:e.phone_number&&""!==e.phone_number.trim()?(0,l.jsxs)("p",{className:"text-sm text-gray-900 flex items-center",children:[(0,l.jsx)(u.A,{className:"w-3 h-3 mr-1"}),e.phone_number]}):(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"N/A"})})}),(0,l.jsx)(d.nA,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.$,{size:"sm",variant:"outline",className:"border-blue-200 text-blue-600 hover:bg-blue-50 bg-transparent",onClick:()=>I(e),children:(0,l.jsx)(p.A,{className:"w-3 h-3"})}),(0,l.jsx)(n.$,{size:"sm",variant:"outline",className:"border-red-200 text-red-600 hover:bg-red-50 bg-transparent",onClick:()=>V(e._id,e.name),disabled:Z===e._id,children:Z===e._id?(0,l.jsx)(h.A,{className:"w-3 h-3 animate-spin"}):(0,l.jsx)(N.A,{className:"w-3 h-3"})})]})})]},e._id))})]})}),0===A.length&&!s&&(0,l.jsx)("div",{className:"text-center py-8",children:(0,l.jsx)("p",{className:"text-gray-500",children:"No teachers found matching your search criteria."})})]})]}),(0,l.jsx)(o.lG,{open:L,onOpenChange:D,children:(0,l.jsxs)(o.Cf,{children:[(0,l.jsxs)(o.c7,{children:[(0,l.jsx)(o.L3,{children:"Edit Teacher Information"}),(0,l.jsx)(o.rr,{children:"Update the teacher's details below"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),(0,l.jsx)(c.p,{value:$.name,onChange:e=>q({...$,name:e.target.value}),placeholder:"Teacher name",className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),(0,l.jsx)(c.p,{value:$.email,onChange:e=>q({...$,email:e.target.value}),placeholder:"Email address",type:"email",className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Phone Number"}),(0,l.jsx)(c.p,{value:$.phone,onChange:e=>q({...$,phone:e.target.value}),placeholder:"Phone number",className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Designation"}),(0,l.jsx)(c.p,{value:$.designation,onChange:e=>q({...$,designation:e.target.value}),placeholder:"Designation",className:"mt-1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Qualification"}),(0,l.jsx)(c.p,{value:$.qualification,onChange:e=>q({...$,qualification:e.target.value}),placeholder:"Qualification",className:"mt-1"})]})]}),(0,l.jsxs)(o.Es,{children:[(0,l.jsx)(n.$,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),(0,l.jsx)(n.$,{onClick:U,disabled:P,style:{backgroundColor:"#51247a"},className:"text-white",children:P?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):"Save Changes"})]})]})})]})}},32225:(e,a,s)=>{Promise.resolve().then(s.bind(s,18760))}},e=>{var a=a=>e(e.s=a);e.O(0,[3096,9924,7976,4973,5554,2396,2347,4870,7358],()=>a(32225)),_N_E=e.O()}]);